using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using static System.Formats.Asn1.AsnWriter;

namespace Tests
{
    [TestClass]
    public class ScorerTest
    {
        [TestMethod]
        public void TestCProb1()
        {
            var prob = ProblemCatalog.Instance.GetSpec("problem-1");
            var solution = new Solution(prob);

            List<Point> points = new List<Point> { new Point(874.4230, 61.9528), new Point(945.4255, 436.8367), new Point(699.8305, 38.8607), new Point(625.8548, 23.3870), new Point(775.9987, 432.7217), new Point(79.4933, 158.1369), new Point(1037.9369, 289.6646), new Point(839.7457, 347.2799), new Point(569.4352, 564.7177), new Point(871.3176, 292.1211), new Point(695.0443, 502.2012), new Point(11.3235, 103.9866), new Point(660.9894, 198.5462), new Point(274.0380, 424.0996), new Point(778.2244, 557.7911), new Point(879.0146, 18.5554), new Point(256.7234, 244.2711), new Point(1048.3605, 67.8367), new Point(61.5665, 166.3083), new Point(790.5385, 231.4158), new Point(1119.7588, 205.6449), new Point(827.8003, 428.3644), new Point(300.3922, 137.5732), new Point(223.2328, 540.1195), new Point(844.5614, 565.3400), new Point(865.4817, 22.8905), new Point(1119.3939, 240.7366), new Point(39.1030, 577.1699), new Point(959.0288, 159.8251), new Point(419.4974, 93.2665), new Point(683.3519, 584.2180), new Point(916.1777, 195.7361), new Point(689.2505, 548.9438), new Point(318.1548, 489.5935), new Point(655.1318, 419.8998), new Point(920.1236, 538.2727), new Point(896.9890, 497.0873), new Point(244.7736, 508.1645), new Point(64.3421, 527.6094), new Point(285.5244, 237.6529), new Point(879.5994, 520.0823), new Point(644.1614, 412.6121), new Point(1026.5906, 181.8258), new Point(895.7431, 42.8769), new Point(874.3124, 560.4294), new Point(797.5998, 146.7092), new Point(565.6618, 357.1258), new Point(346.9964, 20.6935), new Point(954.6616, 331.6311), new Point(944.8225, 50.5804), new Point(725.9746, 124.1876), new Point(252.4655, 391.5677), new Point(916.5949, 340.6213), new Point(628.7664, 139.0472), new Point(31.9184, 424.6917), new Point(718.8055, 115.1283), new Point(737.0787, 210.3348), new Point(904.8789, 510.4488), new Point(370.9787, 45.2729), new Point(958.1354, 367.0734), new Point(67.7816, 292.1868), new Point(826.1199, 376.9823), new Point(1025.6201, 538.5103), new Point(679.5312, 306.9160), new Point(358.1276, 13.8349), new Point(356.8883, 543.1099), new Point(296.1759, 186.6161), new Point(134.1493, 472.6621), new Point(1020.9206, 500.7151), new Point(281.1592, 17.4476), new Point(569.5485, 372.3252), new Point(1020.9271, 382.8810), new Point(754.7606, 77.3675), new Point(834.8735, 568.2589), new Point(20.7608, 84.2382), new Point(953.8853, 585.8156), new Point(45.1739, 287.0968), new Point(797.9078, 429.8265), new Point(764.4597, 25.9469), new Point(750.3568, 477.4145), new Point(563.0736, 82.1575), new Point(177.1767, 65.7588), new Point(854.1431, 185.3945), new Point(484.1689, 109.8080), new Point(937.9338, 163.6603), new Point(162.2479, 45.6390), new Point(1026.9708, 137.4296), new Point(1056.9894, 492.3603), new Point(904.7418, 134.0951), new Point(315.3566, 578.9157), new Point(30.9030, 83.6678), new Point(499.1731, 100.5780), new Point(900.0219, 554.4451), new Point(335.6741, 73.4400), new Point(1094.9469, 373.1761), new Point(1091.4786, 510.5559), new Point(156.5960, 222.5609), new Point(818.8795, 552.5047), new Point(810.3879, 382.4385), new Point(781.4658, 106.1014), new Point(616.0847, 110.0147), new Point(316.0616, 418.2976), new Point(458.0020, 171.4216), new Point(180.0327, 302.3322), new Point(388.3508, 277.4102), new Point(998.2976, 323.1650), new Point(474.2853, 378.0241), new Point(323.4859, 510.4016), new Point(521.6925, 584.3813), new Point(382.7750, 378.5265), new Point(529.2201, 186.6037), new Point(604.5109, 451.5348), new Point(596.9851, 432.0485), new Point(600.9595, 85.4103), new Point(942.8169, 396.6800), new Point(578.6230, 327.2544), new Point(338.6914, 313.6348), new Point(314.1184, 464.8192), new Point(387.6352, 334.3856), new Point(130.6422, 146.9164), new Point(553.8655, 241.4200), new Point(658.6897, 175.5144), new Point(66.8840, 380.7089), new Point(350.8948, 93.9968), new Point(185.5096, 396.8801), new Point(836.4424, 494.3788), new Point(540.8236, 307.7144), new Point(252.5241, 193.8079), new Point(1087.6018, 557.6946), new Point(252.2570, 589.9488), new Point(718.7030, 163.2182), new Point(824.2652, 535.8514), new Point(1105.3460, 383.6948), new Point(871.0292, 82.8228), new Point(487.3251, 477.3309), new Point(540.8597, 379.8975), new Point(409.3551, 216.3761), new Point(831.6531, 45.4048), new Point(1117.0764, 577.4535), new Point(447.7033, 541.1074), new Point(747.7045, 415.4474), new Point(668.4310, 366.4112), new Point(960.3303, 528.9799), new Point(1076.4464, 37.8561), new Point(1088.0225, 214.5695), new Point(915.0187, 166.8245), new Point(1083.8401, 130.7849), new Point(613.2321, 307.2036), new Point(407.7203, 322.4653), new Point(1148.0820, 81.0796), new Point(1115.7466, 270.6003), new Point(204.5594, 201.6950), new Point(790.1340, 185.4555), new Point(972.1132, 341.6203), new Point(560.1639, 264.4135), new Point(101.2505, 422.5095), new Point(898.0901, 259.4342), new Point(558.5909, 45.9488), new Point(415.6272, 456.7433), new Point(155.7106, 363.0709), new Point(542.7682, 140.6083), new Point(930.1539, 300.5815), new Point(849.8533, 584.2078), new Point(44.8803, 472.0448), new Point(59.6631, 476.4910), new Point(917.9096, 467.6646), new Point(993.5985, 357.6240), new Point(549.8648, 590.7524), new Point(683.5235, 371.7813), new Point(752.1987, 47.9695), new Point(402.7491, 496.2074), new Point(1136.0994, 585.2606), new Point(697.8914, 380.8069), new Point(708.3185, 499.0007), new Point(704.6820, 446.1491), new Point(167.1580, 468.5328), new Point(707.9420, 85.6059), new Point(1049.7113, 418.6021), new Point(483.8797, 38.7700), new Point(364.5960, 75.9740), new Point(1025.5864, 115.8229), new Point(285.2245, 263.6946), new Point(1079.0441, 390.4649), new Point(234.7765, 76.2676), new Point(291.7205, 532.6590), new Point(224.8028, 361.3787), new Point(245.2999, 471.2144), new Point(987.9545, 371.5352), new Point(87.3736, 564.2239), new Point(960.2591, 278.7752), new Point(1073.0146, 571.7216), new Point(857.3798, 324.4593), new Point(84.5390, 395.5216), new Point(595.0309, 379.6273), new Point(760.7033, 223.0643), new Point(881.5468, 204.4496), new Point(1064.2160, 194.3249), new Point(887.9878, 69.8131), new Point(1054.9841, 43.2750), new Point(215.2837, 194.7963), new Point(1039.7306, 202.6636), new Point(967.0461, 287.2430), new Point(210.3087, 263.1480), new Point(992.6289, 477.4356), new Point(578.7366, 435.7460), new Point(526.2650, 273.1434), new Point(691.5956, 187.8819), new Point(1135.2488, 423.7296), new Point(312.7860, 567.8987), new Point(1028.4102, 432.9505), new Point(791.4376, 481.8075), new Point(80.5584, 118.1286), new Point(30.7471, 326.6865), new Point(636.3789, 592.9165), new Point(159.3669, 139.5670), new Point(93.4121, 93.1997), new Point(398.7694, 127.8497), new Point(892.0456, 487.4587), new Point(1140.4901, 89.8860), new Point(848.9601, 450.8570), new Point(353.0689, 144.7601), new Point(415.3576, 137.6179), new Point(424.2390, 113.3717), new Point(262.1049, 440.7735), new Point(120.7342, 437.0016), new Point(1070.8282, 219.8867), new Point(734.3768, 394.0451), new Point(121.6640, 334.0586), new Point(637.5302, 13.9753), new Point(1041.8003, 558.4423), new Point(397.4832, 455.3707), new Point(881.6126, 478.2514), new Point(701.4689, 535.3178), new Point(424.8735, 334.1002), new Point(605.1266, 21.4955), new Point(1131.8136, 481.4221), new Point(653.1331, 363.5469), new Point(253.7975, 30.1340), new Point(1042.9739, 178.3410), new Point(169.6104, 108.9480), new Point(709.2830, 271.0061), new Point(314.6561, 73.0245), new Point(761.1783, 177.2358), new Point(684.1323, 478.4526), new Point(146.8685, 49.3839), new Point(812.8298, 282.6698), new Point(999.7017, 288.0645), new Point(234.7594, 554.6016), new Point(68.6542, 82.4449), new Point(945.5170, 552.0947), new Point(789.7565, 512.5779), new Point(904.8950, 455.1736), new Point(408.9139, 417.9708), new Point(370.9439, 421.8907), new Point(357.5182, 503.9974), new Point(1101.3854, 221.8440), new Point(299.5656, 210.0441), new Point(1129.3524, 307.9582), new Point(263.5560, 335.4615), new Point(927.3509, 584.4611), new Point(931.1553, 544.9551), new Point(411.6085, 540.4241), new Point(816.4601, 396.2200), new Point(403.2025, 109.7856), new Point(97.8046, 133.8801), new Point(40.3597, 73.2706), new Point(211.1177, 417.9789), new Point(867.6814, 223.1308), new Point(290.0625, 216.3316), new Point(822.9807, 575.0454), new Point(705.0654, 324.5027), new Point(172.1866, 262.9719), new Point(715.9254, 300.2245), new Point(354.0071, 346.0303), new Point(1116.4694, 82.3883), new Point(946.5615, 237.7037), new Point(624.0735, 466.9551), new Point(462.6438, 392.8864), new Point(58.4010, 178.7984), new Point(139.3683, 572.6887), new Point(327.1781, 291.8668), new Point(715.0270, 193.0994), new Point(912.6452, 18.7864), new Point(615.9493, 474.2911), new Point(760.5344, 93.1029), new Point(768.2857, 85.0285), new Point(979.2126, 214.1932), new Point(694.1117, 84.0552), new Point(816.0225, 147.3352), new Point(1055.0413, 141.9035), new Point(1004.6684, 500.3375), new Point(805.0662, 349.9488), new Point(393.7290, 288.1525), new Point(94.6458, 281.4001), new Point(652.2502, 523.7158), new Point(462.6098, 569.1611), new Point(601.1122, 524.4031), new Point(578.9036, 452.8324), new Point(1077.9072, 261.3381), new Point(253.1368, 53.1332), new Point(39.0883, 372.7584), new Point(849.6259, 506.9107), new Point(500.4557, 48.2287), new Point(447.5261, 39.3454), new Point(570.0439, 296.2279), new Point(283.3890, 307.5469), new Point(892.7299, 570.2537), new Point(30.4295, 225.3045), new Point(16.1564, 369.8195), new Point(998.9942, 258.6037), new Point(521.3480, 481.8504), new Point(609.1877, 584.3626), new Point(464.1356, 296.2264), new Point(134.6620, 381.7801), new Point(1067.6543, 99.7975), new Point(448.9942, 184.6758), new Point(366.9703, 138.2578), new Point(629.9430, 172.1765), new Point(535.0880, 206.3976), new Point(156.9887, 249.5320), new Point(808.9259, 189.4420), new Point(700.3259, 172.7521), new Point(222.8118, 475.3155), new Point(775.3604, 314.7860), new Point(1054.6432, 55.2124), new Point(101.2040, 164.3685), new Point(525.5668, 439.6407), new Point(89.6304, 513.4290), new Point(1070.5251, 590.5518), new Point(883.3704, 377.2690), new Point(941.5107, 471.4229), new Point(61.8087, 140.9002), new Point(743.3444, 159.9060), new Point(55.5078, 436.5634), new Point(419.0548, 479.2791), new Point(496.4336, 446.0109), new Point(981.7573, 277.2824), new Point(178.6964, 341.7893), new Point(945.1163, 294.1915), new Point(675.3366, 551.3038), new Point(1130.8984, 54.4655), new Point(814.8347, 302.7412), new Point(571.5469, 477.0195), new Point(552.0449, 507.5124), new Point(490.2150, 556.4787), new Point(1081.3286, 150.0414), new Point(978.4851, 62.0446), new Point(791.2059, 97.1850), new Point(573.6263, 188.3413), new Point(618.2234, 434.1211), new Point(342.7975, 198.0401), new Point(687.1114, 425.9403), new Point(976.0251, 78.0914), new Point(168.3957, 435.6296), new Point(141.2383, 164.0414), new Point(482.0376, 230.3804), new Point(1049.8300, 350.2905), new Point(695.6012, 268.5836), new Point(292.5491, 344.4394), new Point(810.8463, 483.0788), new Point(150.3902, 412.8564), new Point(118.2454, 466.9217), new Point(641.4827, 450.4678), new Point(333.6009, 394.2946), new Point(1133.0160, 389.6451), new Point(22.6721, 218.2806), new Point(60.8192, 453.4933), new Point(571.2004, 391.7744), new Point(1035.2308, 67.5725), new Point(1058.7052, 205.5714), new Point(898.8392, 83.5536), new Point(1163.1969, 143.7887), new Point(889.1465, 139.6353), new Point(134.9616, 229.8204), new Point(612.1807, 168.3464), new Point(865.5438, 236.0929), new Point(643.4449, 371.2661), new Point(176.1437, 352.0300), new Point(96.2181, 363.6221), new Point(1100.1827, 210.9953), new Point(408.6301, 13.7856), new Point(378.2155, 482.7319), new Point(18.0527, 444.4081), new Point(578.2627, 133.6899), new Point(1043.8372, 459.4676), new Point(384.8664, 455.7996), new Point(509.1507, 75.3096), new Point(291.1638, 471.0714), new Point(774.4436, 296.6525), new Point(184.2471, 569.0247), new Point(300.6828, 293.2096), new Point(799.5864, 409.7756), new Point(458.3976, 406.2151), new Point(778.0034, 280.0997), new Point(442.1492, 196.6206), new Point(527.5649, 65.5932), new Point(199.5425, 305.6683), new Point(606.6436, 344.1083), new Point(315.7677, 363.9167), new Point(942.3777, 189.2346), new Point(1043.2391, 491.7089), new Point(203.1366, 24.0104), new Point(544.2066, 437.7706), new Point(575.9974, 543.0146), new Point(427.6140, 58.5681), new Point(866.2647, 70.1732), new Point(326.5428, 325.5558), new Point(217.1942, 454.6371), new Point(703.4547, 292.8707), new Point(94.3744, 114.4389), new Point(338.5889, 91.8233), new Point(215.7375, 31.8399), new Point(215.1632, 53.8611), new Point(122.8803, 490.3999), new Point(241.3171, 351.7357), new Point(169.6254, 89.4687), new Point(811.9027, 156.4873), new Point(933.4445, 35.9260), new Point(951.7770, 127.3132), new Point(80.1433, 191.8947), new Point(493.1834, 252.1693), new Point(50.5811, 324.8263), new Point(1095.7750, 526.0977), new Point(898.7600, 539.5707), new Point(1011.1952, 167.2231), new Point(19.3991, 514.1864), new Point(668.7029, 506.5452), new Point(488.1103, 568.9224), new Point(1059.6860, 68.3400), new Point(101.7960, 585.4719), new Point(317.6015, 241.7634), new Point(1126.1201, 163.1945), new Point(186.7092, 354.5002), new Point(499.6388, 537.9890), new Point(517.6130, 546.4100), new Point(175.6926, 141.8398), new Point(485.4196, 218.7306), new Point(122.6085, 409.0339), new Point(633.4844, 491.6853), new Point(912.0482, 237.2543), new Point(722.5530, 517.7328), new Point(573.7631, 46.4604), new Point(457.4157, 152.9458), new Point(215.0244, 431.0398), new Point(909.5364, 77.4454), new Point(170.0811, 249.8963), new Point(146.1825, 60.7863), new Point(854.5866, 219.2103), new Point(80.9880, 441.8450), new Point(605.0934, 156.1751), new Point(890.1857, 582.8783), new Point(354.5771, 83.8806), new Point(56.2379, 512.8657), new Point(53.4899, 410.9269), new Point(585.1337, 293.1989), new Point(1089.4846, 232.6397), new Point(544.0332, 364.6170), new Point(729.3835, 30.0292), new Point(765.2393, 494.3017), new Point(214.3016, 283.4387), new Point(383.4339, 101.5203), new Point(510.0065, 161.1739), new Point(589.6195, 92.7890), new Point(335.6854, 110.5360), new Point(891.0369, 518.9858), new Point(265.8310, 63.2620), new Point(675.2615, 108.5949), new Point(793.5546, 375.9134), new Point(341.3708, 11.3149), new Point(675.6041, 175.8563), new Point(152.2300, 70.1128), new Point(472.0389, 100.4754), new Point(672.1445, 400.7789), new Point(1062.1431, 300.7093), new Point(63.9664, 210.2281), new Point(966.8068, 121.0662), new Point(559.6202, 14.3176), new Point(346.7717, 442.2552), new Point(105.5090, 147.2080), new Point(1148.3326, 235.3011), new Point(810.5146, 570.1161), new Point(1072.5411, 51.7753), new Point(407.7886, 198.8184), new Point(931.2560, 378.6710), new Point(841.0485, 553.5570), new Point(1028.1012, 58.0629), new Point(896.0972, 594.0244), new Point(306.5721, 202.2686), new Point(691.7219, 297.0421), new Point(543.9559, 405.9217), new Point(225.2030, 515.1237), new Point(1055.2216, 371.2725), new Point(221.4224, 146.2181), new Point(67.0981, 63.9139), new Point(123.7317, 198.7928), new Point(738.6086, 428.9613), new Point(771.3741, 519.7987), new Point(311.5562, 186.3271), new Point(551.7176, 531.1034), new Point(272.4902, 341.2610), new Point(657.7776, 439.9965), new Point(989.8349, 488.7064), new Point(818.3673, 129.5306), new Point(514.1547, 563.1789), new Point(440.9060, 465.3852), new Point(713.4326, 431.5401), new Point(773.0120, 354.1856), new Point(582.0738, 532.6943), new Point(783.0875, 355.1439), new Point(742.8950, 594.2794), new Point(1000.6067, 69.5313), new Point(848.2840, 264.5126), new Point(800.8647, 443.1335), new Point(1060.4293, 236.9313), new Point(552.9218, 319.0603), new Point(237.3117, 446.5194), new Point(978.9031, 319.1327), new Point(771.8482, 477.9968), new Point(39.2924, 554.9242), new Point(726.7532, 491.6219), new Point(396.7399, 424.5017), new Point(425.6702, 270.5154), new Point(1165.4087, 422.2420), new Point(439.0790, 145.4880), new Point(356.4096, 390.0557), new Point(393.3487, 395.8075), new Point(193.7902, 115.6805), new Point(248.6517, 326.6611), new Point(669.4075, 530.6978), new Point(427.3734, 28.6738), new Point(442.9035, 222.3051), new Point(714.6468, 142.0399), new Point(271.0509, 495.1992), new Point(483.9491, 350.2201), new Point(1155.0491, 271.9140), new Point(399.7432, 522.9047), new Point(32.8548, 110.9143), new Point(1060.5712, 350.6788), new Point(182.3348, 594.8929), new Point(1157.3615, 502.0896), new Point(416.7125, 26.5413), new Point(494.7513, 280.6555), new Point(753.8218, 293.4649), new Point(73.6580, 355.5304), new Point(519.5084, 402.6527), new Point(884.1669, 31.7042), new Point(993.8889, 386.8446), new Point(942.3313, 94.6532), new Point(727.1703, 66.3746), new Point(162.8536, 71.4758), new Point(147.6492, 383.4871), new Point(515.4796, 454.2016), new Point(132.5490, 65.9556), new Point(765.1351, 335.2981), new Point(534.0978, 426.7049), new Point(928.1386, 45.9944), new Point(1164.9332, 247.2676), new Point(66.6381, 418.5781), new Point(49.3761, 352.9015), new Point(436.0582, 86.4558), new Point(594.2264, 268.1923), new Point(269.2969, 469.3163), new Point(574.9089, 205.3932), new Point(1067.4342, 114.0142), new Point(685.2589, 358.9620), new Point(38.1059, 172.9084), new Point(260.7208, 231.0722), new Point(953.0375, 391.1183), new Point(164.4741, 33.2130), new Point(1111.9021, 22.6868), new Point(1014.2589, 36.2919), new Point(703.2945, 64.6986), new Point(464.6227, 453.2051), new Point(791.0280, 121.1521), new Point(534.2433, 366.9098), new Point(335.6096, 234.2727), new Point(295.6849, 576.2626), new Point(268.2141, 545.7234), new Point(100.9700, 195.4226), new Point(460.4353, 140.9107), new Point(655.9611, 500.1948), new Point(1161.5659, 463.3283), new Point(48.9513, 298.7495), new Point(640.0200, 347.8242), new Point(724.8848, 423.6903), new Point(1057.2491, 391.6516), new Point(517.2406, 139.6856), new Point(794.1944, 221.6990), new Point(705.7328, 334.8710), new Point(458.2276, 20.4817), new Point(1007.7178, 156.1091), new Point(11.4373, 298.0493), new Point(431.1852, 431.9649), new Point(891.5980, 476.6854), new Point(513.5435, 352.2433), new Point(312.1070, 269.4789), new Point(352.2113, 570.7264), new Point(450.8647, 520.2895), new Point(673.2034, 276.8746), new Point(616.9969, 507.2556), new Point(58.7668, 569.9863), new Point(1112.4033, 114.1206), new Point(333.9395, 364.3958), new Point(680.3645, 211.0505), new Point(182.8470, 433.7002), new Point(966.5857, 562.7736), new Point(113.9174, 531.8677), new Point(744.5738, 192.1630), new Point(756.4642, 102.4011), new Point(626.8835, 216.0373), new Point(852.6450, 365.9751), new Point(139.2062, 485.6531), new Point(302.5308, 383.1564), new Point(920.3105, 215.8046), new Point(752.8165, 205.2250), new Point(824.6470, 586.2814), new Point(161.4617, 503.4841), new Point(63.9753, 369.2560), new Point(102.3721, 400.2718), new Point(846.4228, 409.2377), new Point(517.0403, 330.2176), new Point(98.3779, 181.7471), new Point(925.5323, 553.4889), new Point(1103.1656, 284.6665), new Point(329.3119, 280.5410), new Point(518.1404, 368.5656), new Point(1157.6475, 28.0851), new Point(720.7543, 368.5085), new Point(838.8505, 220.2071), new Point(24.1055, 66.3185), new Point(890.2559, 463.3003), new Point(454.7735, 131.1198), new Point(779.1472, 491.5981), new Point(258.3096, 277.4384), new Point(1061.0165, 477.6569), new Point(510.3379, 434.9454), new Point(509.8244, 501.3406), new Point(1025.0078, 81.3279), new Point(376.5113, 30.4952), new Point(794.3284, 202.8034), new Point(962.2766, 439.2070), new Point(384.2653, 363.0092), new Point(385.9604, 235.7930), new Point(932.2535, 341.2812), new Point(217.1221, 582.1202), new Point(571.1398, 70.0047), new Point(193.9996, 186.7313), new Point(1080.1349, 403.6828), new Point(366.3852, 62.4265), new Point(931.4402, 237.6995), new Point(329.4135, 180.9320), new Point(267.6291, 288.1712), new Point(809.7997, 258.7133), new Point(313.4674, 537.1304), new Point(136.5017, 592.1880), new Point(1120.1342, 254.0098), new Point(539.3214, 153.5750), new Point(627.4913, 453.6618), new Point(409.8771, 80.2966), new Point(753.0618, 151.2869), new Point(783.9973, 369.0526), new Point(10.9100, 75.1676), new Point(25.9728, 119.0915), new Point(891.3754, 279.8614), new Point(339.0918, 336.0107), new Point(685.0074, 335.3896), new Point(843.1597, 325.9525), new Point(1163.7148, 45.4961), new Point(754.4998, 446.0748), new Point(258.4375, 85.2127), new Point(556.1212, 557.3502), new Point(540.3424, 52.2767), new Point(783.7867, 129.1740), new Point(1023.2568, 102.5754), new Point(1028.8066, 322.4480), new Point(778.7059, 468.7829), new Point(251.2291, 462.7987), new Point(545.2505, 99.3165), new Point(958.3778, 208.7744), new Point(821.9077, 348.4468), new Point(872.8361, 331.6902), new Point(989.1340, 416.9090), new Point(968.3637, 467.6122), new Point(716.0032, 351.9182), new Point(499.9323, 466.3347), new Point(242.9427, 108.8110), new Point(41.3013, 451.5127), new Point(459.6396, 431.9488), new Point(960.9526, 571.5970), new Point(762.3227, 139.9991), new Point(1039.3630, 359.3760), new Point(1023.6432, 260.0229), new Point(730.6320, 451.1608), new Point(296.1812, 430.9148), new Point(758.9172, 466.2873), new Point(160.8532, 566.4697), new Point(118.1457, 229.3301), new Point(345.4830, 372.4602), new Point(739.4633, 458.6657), new Point(811.6708, 426.9014), new Point(41.3239, 402.9482), new Point(280.4882, 449.6933), new Point(1110.6257, 403.3352), new Point(556.0710, 119.5270), new Point(711.1776, 58.1648), new Point(520.2165, 160.9060), new Point(61.2848, 396.9790), new Point(1137.8840, 176.1474), new Point(959.1003, 552.2817), new Point(339.2509, 244.8297), new Point(454.2202, 532.8101), new Point(425.7269, 245.9147), new Point(197.1851, 467.6986), new Point(1144.0958, 188.2334), new Point(443.6874, 111.7735), new Point(98.3097, 256.4809), new Point(252.0585, 572.0026), new Point(748.5275, 216.6747), new Point(419.2861, 522.2289), new Point(1123.4722, 151.5277), new Point(987.4266, 182.4069), new Point(117.4619, 358.7027), new Point(498.5498, 383.8041), new Point(666.3401, 252.3274), new Point(406.6469, 483.8048), new Point(1068.7490, 343.4395), new Point(523.4621, 91.3866), new Point(1085.1866, 22.5668), new Point(164.7238, 303.8490), new Point(394.4606, 313.5030), new Point(524.5852, 108.9627), new Point(238.2218, 197.0889), new Point(977.4598, 479.1648), new Point(547.6666, 224.1249), new Point(175.8059, 500.8230), new Point(361.3938, 360.5873), new Point(1120.5614, 352.3713), new Point(960.0147, 61.4481), new Point(987.2100, 547.7130), new Point(816.0369, 63.6444), new Point(319.9667, 402.0749), new Point(323.9580, 223.2083), new Point(219.6767, 498.3645), new Point(836.6625, 454.0929), new Point(279.3925, 539.8757), new Point(25.2396, 477.4743), new Point(650.1138, 48.9155), new Point(829.2396, 215.7921), new Point(565.7106, 503.9807), new Point(485.9272, 460.1348), new Point(96.1423, 487.2687), new Point(729.1762, 54.8079), new Point(314.6801, 10.1866), new Point(234.2130, 591.3550), new Point(671.3231, 163.3396), new Point(54.9156, 102.4864), new Point(631.2871, 519.4202), new Point(604.6183, 287.7879), new Point(102.7144, 244.7661), new Point(219.8000, 20.8622), new Point(1055.5576, 166.5107), new Point(300.9474, 172.6297), new Point(487.0523, 493.4034), new Point(495.7508, 218.5987), new Point(893.5469, 353.3142), new Point(688.3525, 220.4991), new Point(921.1032, 90.1097), new Point(805.3860, 179.3374), new Point(253.6079, 540.4000), new Point(797.0295, 284.2431), new Point(750.6236, 120.7142), new Point(90.7738, 35.2955), new Point(763.8125, 197.4446), new Point(915.6242, 361.5047), new Point(962.7914, 254.4860), new Point(206.5782, 347.1620), new Point(712.3236, 244.2724), new Point(828.7769, 77.1884), new Point(223.5997, 526.3525), new Point(388.7819, 533.6379), new Point(942.1995, 202.5853), new Point(195.3750, 293.3749), new Point(666.4909, 67.5646), new Point(1164.6217, 366.2606), new Point(856.5607, 486.4659), new Point(145.1196, 39.0815), new Point(261.8867, 130.7920), new Point(113.7486, 547.9232), new Point(1160.6569, 62.5004), new Point(735.4805, 97.8039), new Point(289.6511, 441.2510), new Point(434.5751, 529.6779), new Point(847.1041, 198.1634), new Point(912.8069, 32.4394), new Point(310.5773, 33.9527), new Point(448.9095, 555.9735), new Point(452.8169, 477.8625), new Point(256.7848, 39.8780), new Point(467.0456, 43.9654), new Point(436.4593, 162.8327), new Point(1011.1157, 251.8738), new Point(925.0346, 480.0708), new Point(496.8588, 573.8129), new Point(77.0538, 495.5082), new Point(557.5382, 393.4900), new Point(331.1595, 51.5848), new Point(1060.5479, 461.9187), new Point(584.6843, 553.7326), new Point(393.4011, 384.7512), new Point(327.8996, 166.8084), new Point(857.2461, 306.8321), new Point(160.2332, 294.3074), new Point(205.7637, 484.3783), new Point(537.3550, 350.1063), new Point(983.2769, 123.6040), new Point(1099.7188, 493.2316), new Point(591.2637, 470.0505), new Point(986.0275, 459.3750), new Point(358.3571, 202.9042), new Point(432.3879, 412.1773), new Point(589.9506, 66.9489), new Point(1053.1704, 93.9025), new Point(261.3920, 153.3939), new Point(856.5933, 461.4218), new Point(864.7559, 33.2379), new Point(131.2969, 548.2484), new Point(961.2278, 224.8122), new Point(915.7604, 329.8771), new Point(1131.2999, 291.1527), new Point(1159.9629, 565.6126), new Point(656.8173, 210.2994), new Point(710.7758, 516.6681), new Point(1155.8717, 519.7527), new Point(676.3199, 229.7912), new Point(84.3354, 264.2388), new Point(324.2527, 433.7786), new Point(1003.5259, 420.1050), new Point(850.1894, 37.3217), new Point(666.8454, 183.3929), new Point(550.0377, 518.5900), new Point(819.8242, 478.1053), new Point(893.9675, 384.7745), new Point(808.5708, 414.1805), new Point(929.6995, 390.6026), new Point(910.2640, 109.7697), new Point(379.6414, 207.6508), new Point(796.6378, 545.5399), new Point(1045.3254, 85.0104), new Point(313.7546, 88.5390), new Point(627.1262, 250.2341), new Point(600.0327, 175.1327), new Point(918.9193, 429.4789), new Point(720.8141, 37.0246), new Point(85.0188, 54.5774), new Point(113.0814, 559.9908), new Point(934.5666, 322.5707), new Point(596.1821, 327.9443), new Point(367.1232, 273.8421), new Point(1015.9446, 592.1493), new Point(871.6072, 43.3987), new Point(179.2153, 209.6035), new Point(689.4580, 232.1247), new Point(385.4362, 151.6239), new Point(809.7460, 138.9072), new Point(1138.5875, 435.2078), new Point(1055.6511, 14.0366), new Point(445.9586, 355.2126), new Point(204.0081, 127.9524), new Point(189.4672, 495.4686), new Point(266.4076, 182.9311), new Point(811.6592, 12.3220), new Point(175.3446, 534.5106), new Point(936.0762, 355.0889), new Point(52.5118, 486.0236), new Point(142.1405, 339.0285), new Point(1165.8141, 298.1687), new Point(625.3160, 117.1407), new Point(1030.5793, 393.4336), new Point(188.5821, 381.0226), new Point(96.4428, 312.2819), new Point(365.4414, 151.3145), new Point(187.5382, 175.2571), new Point(665.1078, 467.7408), new Point(388.5403, 475.9957), new Point(173.8422, 322.1630), new Point(506.6826, 85.9510), new Point(608.2862, 277.8100), new Point(73.2496, 332.6352), new Point(839.2711, 172.7730), new Point(379.8722, 567.2007), new Point(682.6049, 503.8328), new Point(264.8929, 75.5810), new Point(737.6891, 373.1033), new Point(1068.4140, 531.9630), new Point(689.3423, 386.9603), new Point(1143.0568, 51.3868), new Point(949.9351, 412.3974), new Point(1023.9636, 512.9928), new Point(1051.1567, 432.2419), new Point(555.5771, 181.2257), new Point(524.2557, 256.3137), new Point(474.2918, 274.1424), new Point(727.4291, 225.6440), new Point(1159.0779, 133.3161), new Point(685.6647, 23.1311), new Point(266.0544, 308.0663), new Point(264.7613, 511.2619), new Point(859.9562, 262.9300), new Point(339.9486, 574.1741), new Point(196.2245, 433.0982), new Point(111.2080, 484.2226), new Point(277.0377, 354.7332), new Point(437.7821, 269.3017), new Point(24.2924, 399.1801), new Point(769.4312, 161.8881), new Point(472.0016, 365.4241), new Point(1123.1742, 547.2929), new Point(237.9504, 324.1679), new Point(764.4680, 566.9656), new Point(378.9106, 507.9925), new Point(383.6446, 66.8209), new Point(763.1014, 113.2900), new Point(1031.7151, 223.8287), new Point(434.1516, 329.6911), new Point(673.2476, 453.9551), new Point(635.6107, 437.7572), new Point(920.0753, 316.3445), new Point(751.5447, 60.4912), new Point(656.0964, 460.2936), new Point(1013.9484, 50.1873), new Point(517.2732, 121.2601), new Point(385.2856, 412.9603), new Point(901.4468, 391.6370), new Point(446.4687, 24.4764), new Point(913.1524, 583.3275), new Point(124.3641, 528.9954), new Point(138.4434, 264.3650), new Point(519.6898, 381.1545), new Point(568.9766, 109.6806), new Point(1130.9250, 190.5640), new Point(1097.9396, 336.3002), new Point(355.4402, 243.2614), new Point(929.4812, 208.4030), new Point(141.0820, 455.1726), new Point(138.3611, 128.8178), new Point(634.4838, 62.4784), new Point(789.1562, 34.1398), new Point(936.9028, 524.5182), new Point(67.6956, 559.7594), new Point(285.7950, 414.1298), new Point(720.5246, 578.3608), new Point(362.3313, 412.5575), new Point(525.2826, 417.6391), new Point(762.8932, 384.6791), new Point(593.7222, 512.0069), new Point(781.1295, 571.8086), new Point(1076.2820, 426.8343), new Point(71.9296, 95.9402), new Point(408.6942, 50.6591), new Point(754.1005, 492.0494), new Point(116.7646, 54.3384), new Point(1114.4524, 591.7367), new Point(796.9533, 557.7030), new Point(561.0699, 540.7144), new Point(414.7826, 268.2520), new Point(429.7534, 468.2611), new Point(501.5837, 133.6065), new Point(280.4081, 41.6689), new Point(754.0110, 34.1085), new Point(904.3567, 423.3231), new Point(390.5361, 206.2399), new Point(378.9913, 125.7318), new Point(666.7294, 307.5193), new Point(122.6679, 274.3156), new Point(110.6993, 518.7730), new Point(1074.1980, 436.8283), new Point(698.3740, 563.7737), new Point(497.1279, 13.2750), new Point(194.6874, 153.7985), new Point(162.9134, 424.7425), new Point(1124.9546, 559.9091), new Point(1134.3452, 404.9715), new Point(870.7195, 313.8290), new Point(308.8627, 525.9871), new Point(1094.1774, 398.3456), new Point(1008.0023, 228.7596), new Point(1105.0986, 61.9616), new Point(536.9909, 503.0706), new Point(267.1518, 567.2875), new Point(659.9784, 140.7997), new Point(41.6383, 484.2268), new Point(503.5587, 35.7729), new Point(221.8975, 259.7456), new Point(607.6576, 411.3080), new Point(1073.1289, 293.1280), new Point(511.2820, 262.8161), new Point(188.3033, 94.7387), new Point(1031.8845, 561.5551), new Point(607.9968, 102.6157), new Point(397.9068, 260.3750), new Point(637.8677, 229.2143), new Point(188.8250, 457.8440), new Point(608.6164, 515.5104), new Point(212.6832, 132.9331), new Point(342.6309, 161.7789), new Point(567.7128, 171.1827), new Point(449.8212, 439.6231), new Point(194.9923, 449.8635), new Point(952.8173, 305.5814), new Point(1067.7015, 19.1740), new Point(1119.3923, 512.9047), new Point(805.2197, 326.5297), new Point(637.4290, 293.6316), new Point(498.7552, 78.2735), new Point(929.1221, 406.2693), new Point(146.4610, 187.2547), new Point(1150.3024, 404.4746), new Point(995.4931, 147.5120), new Point(281.5618, 555.4252), new Point(404.3731, 229.6764), new Point(76.8527, 511.3255), new Point(1103.4470, 186.6524), new Point(784.5021, 55.1546), new Point(513.1218, 96.2488), new Point(500.5510, 152.2812), new Point(520.0961, 224.1522), new Point(127.7507, 120.9890), new Point(1139.2532, 457.8171), new Point(537.0656, 392.6641), new Point(718.3019, 313.7603), new Point(168.6909, 333.9462), new Point(365.4023, 461.3320), new Point(483.6162, 173.3513), new Point(470.1680, 353.9713), new Point(144.9500, 207.7191), new Point(371.6373, 179.3033), new Point(85.0721, 486.7552), new Point(112.2118, 103.9498), new Point(204.6348, 567.6602), new Point(807.9444, 545.0475), new Point(831.5453, 58.3545), new Point(779.3229, 174.7465), new Point(480.3970, 147.3305), new Point(198.1256, 407.0655), new Point(799.1600, 468.4605), new Point(410.1839, 161.1622), new Point(152.0143, 306.9978), new Point(645.5049, 121.8970), new Point(974.1152, 500.5067), new Point(651.6717, 228.1225), new Point(564.8228, 316.6373), new Point(1084.1925, 323.3126), new Point(279.9909, 210.0288), new Point(413.9152, 346.5249), new Point(967.9584, 133.1634), new Point(337.0129, 289.7273), new Point(528.3507, 133.5702), new Point(548.2086, 299.6610), new Point(925.7983, 518.5819) };
            for (int i = 0; i < points.Count; i++)
            {
                solution.SetPlacement(prob.Musicians[i], points[i]);
            }

            var score = solution.InitializeScore();
            Assert.AreEqual(9227687, score);
        }

        [TestMethod]
        public void TestExampleProblem()
        {
            var prob = ProblemSpec.ReadJson(ProblemSpecTest.PROBLEM);
            var solution = new Solution(prob);

            List<Point> points = new List<Point> { new Point(590.0000, 10.0000), new Point(1100.0000, 100.0000), new Point(1100.0000, 150.0000) };
            for (int i = 0; i < points.Count; i++)
            {
                solution.SetPlacement(prob.Musicians[i], points[i]);
            }


            var score = solution.InitializeScore();
            Assert.AreEqual(5343, score);

        }

        [TestMethod]
        public void TestScorerBlocking()
        {
            var prob = ProblemSpec.ReadJson(ProblemSpecTest.PROBLEM);
            var solution = new Solution(prob);
            solution.SetPlacement(prob.Musicians[0], new(590.0, 10.0));
            solution.SetPlacement(prob.Musicians[1], new(1100.0, 100.0));
            solution.SetPlacement(prob.Musicians[2], new(1100.0, 150.0));

            var scorer = new OcclusionFinder(solution);
            scorer.OnPlacementChanged(prob.Musicians[0], Point.ORIGIN);
            scorer.OnPlacementChanged(prob.Musicians[1], Point.ORIGIN);
            scorer.OnPlacementChanged(prob.Musicians[2], Point.ORIGIN);

            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[0], prob.Attendees[0]));
            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[0], prob.Attendees[1]));
            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[0], prob.Attendees[2]));
            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[1], prob.Attendees[0]));
            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[1], prob.Attendees[1]));
            Assert.IsTrue(scorer.IsMusicianBlocked(prob.Musicians[1], prob.Attendees[2]));
            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[2], prob.Attendees[0]));
            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[2], prob.Attendees[1]));
            Assert.IsFalse(scorer.IsMusicianBlocked(prob.Musicians[2], prob.Attendees[2]));
        }
    }
}
